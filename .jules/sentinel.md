## 2025-03-01 - XSS in innerHTML template literals
**Vulnerability:** Unsanitized user data from server (magic link fetch results like error messages and order details) was injected directly into `.innerHTML` strings in `src/magic-login.js`.
**Learning:** Even if the server WAF attempts to block XSS payloads, defense in depth is required. The UI must safely encode output before rendering it as HTML to prevent stored and reflected XSS vulnerabilities.
**Prevention:** Always use a utility function like `escapeHtml()` when interpolating dynamic data into `.innerHTML`, or prefer using safer methods like `.textContent` or `innerText` when no HTML formatting is expected.